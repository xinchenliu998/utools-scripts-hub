# Scripts Hub - uTools 脚本管理工具

一个基于 uTools 的脚本管理工具，支持快速运行脚本，并提供灵活的配置规则来管理不同类型的脚本。

## ✨ 功能特性

### 🚀 快速运行脚本

- 通过 `run` 关键字进入启动界面
- 支持文件名或关键字搜索匹配脚本
- 键盘导航（上下箭头选择，Enter 执行）
- 通过外部应用运行脚本，无需等待执行结果

### ⚙️ 脚本管理

- 支持添加单个脚本文件
- 支持添加文件夹（支持嵌套目录）
- 为脚本设置描述信息，便于识别
- 通过文件名、路径、描述进行搜索匹配
- 编辑和删除已添加的脚本

### 📋 规则配置

- 根据文件后缀或文件名模式自动匹配规则
- 支持正则表达式匹配
- 可为不同规则指定不同的外部应用来打开脚本
- 支持自定义应用启动参数
- 未匹配规则时使用系统默认应用打开

### 🎯 运行方式

- **通过外部应用运行**: 脚本通过系统默认应用或规则指定的应用打开
- **无需等待结果**: 启动外部应用后立即返回，不阻塞界面
- **支持所有文件类型**: 可通过规则配置为任何文件类型指定打开方式
- **平台智能处理**:
  - **Linux/Mac**: 当规则指定了应用（如 `node`、`python` 等）时，自动在终端窗口中执行，方便查看输出和错误信息
  - **Windows**: 直接创建子进程执行，不通过终端
  - **Shell 环境**: Linux/Mac 平台会自动加载用户的 shell 配置文件（如 `.zshrc`、`.bashrc`），确保环境变量和别名可用

## 🚀 快速开始

### 安装

1. 克隆项目

```bash
git clone https://github.com/xinchenliu998/utools-scripts-hub
cd utools-scripts-hub
```

2. 安装依赖

```bash
npm install
# 或
pnpm install
```

3. 启动开发服务器

```bash
npm run dev
```

4. 在 uTools 中加载插件
   - 打开 uTools
   - 进入插件开发模式
   - 选择项目目录加载插件

### 构建

```bash
npm run build
```

构建完成后，在 `dist` 目录中生成生产文件。

> 📖 更多开发相关文档请查看 [开发文档](./docs/DEVELOPMENT.md)

## 📖 使用说明

### 1. 添加脚本

1. 在 uTools 中输入 `run-setting` 进入设置界面
2. 点击「脚本管理」标签
3. 点击「+ 添加脚本/文件夹」按钮
4. 选择要添加的脚本文件或文件夹
5. 填写脚本信息：
   - **名称**: 脚本显示名称
   - **路径**: 脚本文件路径（可通过「选择文件」或「选择文件夹」按钮选择）
   - **文件夹（支持嵌套）**: 勾选此项表示添加的是文件夹（支持嵌套），位于路径输入框下方，勾选后选择按钮会变为「选择文件夹」
   - **描述**: 脚本描述信息（可选）

**注意**: 文件夹复选框位于路径输入框下方，勾选后会自动切换文件选择对话框类型。

### 2. 配置规则

规则用于指定不同文件类型使用哪个外部应用打开。当运行脚本时，系统会查找匹配的规则，如果找到则使用规则指定的应用打开，否则使用系统默认应用。

1. 在设置界面点击「规则配置」标签
2. 点击「+ 添加规则」按钮
3. 填写规则信息：
   - **规则名称**: 规则的显示名称
   - **匹配模式**: 正则表达式，用于匹配文件名或后缀
     - 例如：`\.js$` 匹配所有 .js 文件
     - 例如：`test.*` 匹配所有以 test 开头的文件
   - **指定应用**: 可选，指定用于打开文件的外部应用
     - 例如：`node`、`python`、`powershell`、`code`（VS Code）等
     - 留空则使用系统默认应用打开
   - **参数**: 可选，应用启动时的参数，多个参数用空格分隔
   - **描述**: 规则描述信息（可选）

#### 规则示例

**示例 1**: JavaScript 文件使用 node 打开

- 规则名称: JavaScript 文件
- 匹配模式: `\.js$`
- 指定应用: `node`

**示例 2**: PowerShell 脚本使用特定参数打开

- 规则名称: PowerShell 脚本
- 匹配模式: `\.ps1$`
- 指定应用: `powershell`
- 参数: `-ExecutionPolicy Bypass -File`

**示例 3**: 文本文件使用 VS Code 打开

- 规则名称: 文本文件
- 匹配模式: `\.(txt|md|json)$`
- 指定应用: `code`

### 3. 运行脚本

1. 在 uTools 中输入 `run` 进入运行界面
2. 在搜索框中输入文件名或关键字搜索脚本
   - 支持精确文件名匹配（优先）
   - 支持文件名包含匹配
   - 支持路径、描述匹配
3. 使用上下箭头键选择脚本
4. 按 Enter 键或双击运行脚本
   - 如果配置了匹配的规则，会使用规则指定的应用打开
   - 如果没有匹配的规则，使用系统默认应用打开
   - 脚本会在外部应用中运行，不会显示执行结果

## 📖 文档

- [开发文档](./docs/DEVELOPMENT.md) - 开发环境搭建、项目结构、开发指南
- [架构文档](./docs/ARCHITECTURE.md) - 系统架构、模块设计、数据流
- [配置文档](./docs/CONFIGURATION.md) - 配置格式、数据存储说明

本项目大量结合**AI编程**，文档可能和项目不一致，请注意区分。

## ⌨️ 快捷键

### 运行界面

- `↑/↓`: 上下选择脚本
- `Enter`: 运行选中的脚本
- `双击`: 运行脚本

### 设置界面

- 对话框只能通过 X 按钮、取消按钮或保存按钮关闭
- 点击对话框外部不会关闭（防止误操作）

## 🐛 故障排除

### 脚本无法打开

1. **检查文件路径**: 确保脚本文件路径正确且文件存在
2. **检查规则配置**: 如果使用了规则，确保规则的正则表达式正确
3. **检查应用路径**: 如果指定了应用，确保应用在系统 PATH 中或使用完整路径
4. **检查系统默认应用**: 如果没有配置规则，确保系统已为文件类型设置了默认应用

### 配置丢失

配置数据存储在 uTools 用户数据目录中，如果配置丢失：

1. 检查 uTools 用户数据目录是否存在
2. 检查是否有权限写入该目录
3. 重新添加脚本和规则
