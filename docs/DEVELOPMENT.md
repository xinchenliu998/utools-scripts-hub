# å¼€å‘æ–‡æ¡£

æœ¬æ–‡æ¡£ä»‹ç»å¦‚ä½•æ­å»ºå¼€å‘ç¯å¢ƒã€é¡¹ç›®ç»“æ„ã€å¼€å‘æŒ‡å—ä»¥åŠ API è¯´æ˜ã€‚

## ğŸ“¦ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Vue 3 (Composition API)
- **æ„å»ºå·¥å…·**: Vite 7.x
- **å¹³å°**: uTools
- **è¯­è¨€**: TypeScript 5.x
- **ä¾èµ–ç®¡ç†**: pnpm / npm
- **ç±»å‹å®šä¹‰**: utools-api-types
- **æ‹–æ‹½æ’åº**: vuedraggable (å¼€å‘ä¾èµ–)

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒæ­å»º

### å‰ç½®è¦æ±‚

- Node.js >= 18.0.0
- pnpm >= 8.0.0 (æ¨è) æˆ– npm >= 9.0.0
- uTools æ¡Œé¢åº”ç”¨

### å®‰è£…æ­¥éª¤

1. **å…‹éš†é¡¹ç›®**

```bash
git clone https://github.com/xinchenliu998/utools-scripts-hub
cd utools-scripts-hub
```

2. **å®‰è£…ä¾èµ–**

```bash
pnpm install
# æˆ–
npm install
```

3. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**

```bash
pnpm dev
# æˆ–
npm run dev
```

å¼€å‘æœåŠ¡å™¨ä¼šåœ¨ `http://localhost:5173` å¯åŠ¨ã€‚

4. **åœ¨ uTools ä¸­åŠ è½½æ’ä»¶**

   - æ‰“å¼€ uTools åº”ç”¨
   - æŒ‰ `Alt + Space` æ‰“å¼€ uTools ä¸»ç•Œé¢
   - ç‚¹å‡»å³ä¸Šè§’è®¾ç½®å›¾æ ‡ï¼Œé€‰æ‹©ã€Œæ’ä»¶å¼€å‘ã€
   - ç‚¹å‡»ã€ŒåŠ è½½æœ¬åœ°æ’ä»¶ã€
   - é€‰æ‹©é¡¹ç›®æ ¹ç›®å½•ï¼ˆ`utools-scripts-hub`ï¼‰
   - æ’ä»¶ä¼šè‡ªåŠ¨åŠ è½½å¹¶å¯ç”¨

5. **æµ‹è¯•æ’ä»¶**

   - åœ¨ uTools ä¸­è¾“å…¥ `run` æˆ– `è¿è¡Œ` è¿›å…¥è¿è¡Œç•Œé¢
   - è¾“å…¥ `run-setting` æˆ– `è„šæœ¬è®¾ç½®` è¿›å…¥è®¾ç½®ç•Œé¢

### å¼€å‘æ¨¡å¼é…ç½®

å¼€å‘æ¨¡å¼ä¸‹ï¼Œ`public/plugin.json` ä¸­çš„ `development.main` é…ç½®ä¼šæŒ‡å‘æœ¬åœ°å¼€å‘æœåŠ¡å™¨ï¼š

```json
{
  "development": {
    "main": "http://localhost:5173"
  }
}
```

è¿™æ ·ä¿®æ”¹ä»£ç åï¼ŒuTools ä¼šè‡ªåŠ¨çƒ­é‡è½½ï¼Œæ— éœ€é‡æ–°åŠ è½½æ’ä»¶ã€‚

## ğŸ“ é¡¹ç›®ç»“æ„

```
utools-scripts-hub/
â”œâ”€â”€ public/                    # é™æ€èµ„æºç›®å½•
â”‚   â”œâ”€â”€ plugin.json           # uTools æ’ä»¶é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ logo.png              # æ’ä»¶å›¾æ ‡
â”‚   â””â”€â”€ preload/              # é¢„åŠ è½½è„šæœ¬ï¼ˆNode.js ç¯å¢ƒï¼‰
â”‚       â”œâ”€â”€ services.js       # æœåŠ¡å…¥å£ï¼Œå‘æ¸²æŸ“è¿›ç¨‹æš´éœ² API
â”‚       â”œâ”€â”€ package.json      # preload ä¾èµ–é…ç½®
â”‚       â””â”€â”€ lib/              # é¢„åŠ è½½è„šæœ¬åº“
â”‚           â”œâ”€â”€ configService.js   # é…ç½®ç®¡ç†æœåŠ¡
â”‚           â”œâ”€â”€ fileService.js     # æ–‡ä»¶æ“ä½œæœåŠ¡
â”‚           â”œâ”€â”€ scriptService.js   # è„šæœ¬æ‰§è¡ŒæœåŠ¡ï¼ˆè§„åˆ™åŒ¹é…ï¼‰
â”‚           â”œâ”€â”€ platformService.js # å¹³å°æœåŠ¡ï¼ˆç»Ÿä¸€å¹³å°æ¥å£ï¼‰
â”‚           â”œâ”€â”€ terminalService.js # ç»ˆç«¯æœåŠ¡ï¼ˆLinux/Mac ç»ˆç«¯æ‰§è¡Œï¼‰
â”‚           â”œâ”€â”€ shellService.js    # Shell æœåŠ¡ï¼ˆshell å·¥å…·å‡½æ•°ï¼‰
â”‚           â””â”€â”€ utils.js           # å·¥å…·å‡½æ•°ï¼ˆè¿›ç¨‹åˆ›å»ºã€å‚æ•°è½¬ä¹‰ã€å¹³å°åˆ¤æ–­ï¼‰
â”œâ”€â”€ src/                       # æºä»£ç ç›®å½•
â”‚   â”œâ”€â”€ App.vue               # ä¸»åº”ç”¨ç»„ä»¶ï¼ˆè·¯ç”±ç®¡ç†ï¼‰
â”‚   â”œâ”€â”€ main.ts               # åº”ç”¨å…¥å£æ–‡ä»¶
â”‚   â”œâ”€â”€ main.css              # å…¨å±€æ ·å¼
â”‚   â”œâ”€â”€ Run/                  # è¿è¡Œè„šæœ¬ç•Œé¢
â”‚   â”‚   â””â”€â”€ index.vue
â”‚   â”œâ”€â”€ RunSetting/           # è®¾ç½®ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ index.vue         # è®¾ç½®ä¸»ç•Œé¢
â”‚   â”‚   â”œâ”€â”€ SettingsDialog.vue # è®¾ç½®å¯¹è¯æ¡†
â”‚   â”‚   â””â”€â”€ components/       # è®¾ç½®ç•Œé¢å­ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ ScriptList.vue      # è„šæœ¬åˆ—è¡¨
â”‚   â”‚       â”œâ”€â”€ ScriptItem.vue      # è„šæœ¬é¡¹
â”‚   â”‚       â”œâ”€â”€ AddScriptDialog.vue # æ·»åŠ è„šæœ¬å¯¹è¯æ¡†
â”‚   â”‚       â”œâ”€â”€ RuleList.vue        # è§„åˆ™åˆ—è¡¨
â”‚   â”‚       â”œâ”€â”€ RuleItem.vue        # è§„åˆ™é¡¹
â”‚   â”‚       â”œâ”€â”€ AddRuleDialog.vue   # æ·»åŠ è§„åˆ™å¯¹è¯æ¡†
â”‚   â”‚       â”œâ”€â”€ settings/           # è®¾ç½®å¯¹è¯æ¡†å­ç»„ä»¶
â”‚   â”‚       â”‚   â”œâ”€â”€ AppearanceTab.vue  # å¤–è§‚è®¾ç½®ï¼ˆè¯­è¨€ã€ä¸»é¢˜è‰²ï¼‰
â”‚   â”‚       â”‚   â”œâ”€â”€ ExcludeTab.vue     # æ’é™¤æ–‡ä»¶å¤¹è®¾ç½®
â”‚   â”‚       â”‚   â””â”€â”€ ButtonsTab.vue     # æŒ‰é’®é¢œè‰²è®¾ç½®
â”‚   â”‚       â””â”€â”€ common/             # å…±äº«ç»„ä»¶
â”‚   â”‚           â”œâ”€â”€ BaseDialog.vue  # åŸºç¡€å¯¹è¯æ¡†ç»„ä»¶
â”‚   â”‚           â”œâ”€â”€ IconButton.vue  # å›¾æ ‡æŒ‰é’®ç»„ä»¶
â”‚   â”‚           â”œâ”€â”€ ActionButtons.vue # æ“ä½œæŒ‰é’®ç»„
â”‚   â”‚           â”œâ”€â”€ EmptyState.vue  # ç©ºçŠ¶æ€ç»„ä»¶
â”‚   â”‚           â”œâ”€â”€ SearchInput.vue # æœç´¢è¾“å…¥æ¡†ç»„ä»¶
â”‚   â”‚           â”œâ”€â”€ HelpTooltip.vue # å¸®åŠ©æç¤ºç»„ä»¶
â”‚   â”‚           â”œâ”€â”€ FormItem.vue    # è¡¨å•é¡¹ç»„ä»¶
â”‚   â”‚           â””â”€â”€ FormInput.vue   # è¡¨å•è¾“å…¥ç»„ä»¶
â”‚   â”œâ”€â”€ composables/          # Vue ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useScripts.ts     # è„šæœ¬ç®¡ç†é€»è¾‘ï¼ˆçŠ¶æ€ç®¡ç†ã€CRUDã€å¯ç”¨/ç¦ç”¨ï¼‰
â”‚   â”‚   â””â”€â”€ useSettings.ts    # è®¾ç½®ç®¡ç†ï¼ˆè¯­è¨€ã€ä¸»é¢˜è‰²ã€æŒ‰é’®é¢œè‰²ã€æ’é™¤æ–‡ä»¶å¤¹ï¼‰
â”‚   â”œâ”€â”€ i18n.ts               # vue-i18n é…ç½®å…¥å£
â”‚   â”œâ”€â”€ utils/                # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ i18n.ts           # i18n å·¥å…·å‡½æ•°ï¼ˆå…¼å®¹æ—§ç‰ˆï¼‰
â”‚   â”‚   â””â”€â”€ tooltip.ts        # tooltip ä½ç½®è®¡ç®—å·¥å…·
â”‚   â”œâ”€â”€ locales/              # å›½é™…åŒ–è¯­è¨€åŒ…
â”‚   â”‚   â”œâ”€â”€ index.ts          # è¯­è¨€åŒ…å…¥å£ï¼ˆvue-i18n æ ¼å¼ï¼‰
â”‚   â”‚   â”œâ”€â”€ zh-CN.ts          # ä¸­æ–‡è¯­è¨€åŒ…
â”‚   â”‚   â””â”€â”€ en-US.ts          # è‹±æ–‡è¯­è¨€åŒ…
â”‚   â”œâ”€â”€ constants/            # å¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ ui.ts             # UIç›¸å…³å¸¸é‡ï¼ˆé¢œè‰²ã€å°ºå¯¸ã€å›¾æ ‡ï¼‰
â”‚   â””â”€â”€ types/                # TypeScript ç±»å‹å®šä¹‰
â”‚       â””â”€â”€ global.d.ts       # å…¨å±€ç±»å‹å£°æ˜ï¼ˆwindow.servicesã€DirectoryItemã€EnterActionç­‰ï¼‰
â”œâ”€â”€ docs/                     # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ DEVELOPMENT.md        # å¼€å‘æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â”‚   â”œâ”€â”€ ARCHITECTURE.md       # æ¶æ„æ–‡æ¡£
â”‚   â””â”€â”€ CONFIGURATION.md      # é…ç½®æ–‡æ¡£
â”œâ”€â”€ package.json              # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ tsconfig.json            # TypeScript é…ç½®
â”œâ”€â”€ tsconfig.node.json       # Node.js TypeScript é…ç½®
â”œâ”€â”€ vite.config.js           # Vite æ„å»ºé…ç½®
â””â”€â”€ README.md                # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸ—ï¸ æ ¸å¿ƒæ¨¡å—è¯´æ˜

### 1. é¢„åŠ è½½è„šæœ¬ (Preload)

é¢„åŠ è½½è„šæœ¬è¿è¡Œåœ¨ Node.js ç¯å¢ƒä¸­ï¼Œå¯ä»¥è®¿é—®æ–‡ä»¶ç³»ç»Ÿã€æ‰§è¡Œç³»ç»Ÿå‘½ä»¤ç­‰ã€‚é€šè¿‡ `window.services` å¯¹è±¡å‘æ¸²æŸ“è¿›ç¨‹æš´éœ² APIã€‚

**æ–‡ä»¶ä½ç½®**: `public/preload/services.js`

**ä¸»è¦æœåŠ¡**:

- `configService.js`: é…ç½®æ–‡ä»¶çš„è¯»å†™
- `fileService.js`: æ–‡ä»¶ç³»ç»Ÿæ“ä½œï¼ˆæ£€æŸ¥è·¯å¾„ã€è¯»å–ç›®å½•ï¼‰
- `scriptService.js`: è„šæœ¬æ‰§è¡Œï¼ˆæ ¹æ®è§„åˆ™åŒ¹é…å¹¶æ‰“å¼€æ–‡ä»¶ï¼‰
- `platformService.js`: å¹³å°æœåŠ¡ï¼ˆå°è£…å¹³å°å·®å¼‚ï¼Œæä¾›ç»Ÿä¸€æ¥å£ï¼‰
- `terminalService.js`: ç»ˆç«¯æœåŠ¡ï¼ˆLinux/Mac å¹³å°çš„ç»ˆç«¯æ‰§è¡ŒåŠŸèƒ½ï¼‰
- `shellService.js`: Shell æœåŠ¡ï¼ˆshell é…ç½®ã€è·¯å¾„å’Œå‘½ä»¤æ„å»ºï¼‰
- `utils.js`: å·¥å…·å‡½æ•°ï¼ˆè¿›ç¨‹åˆ›å»ºã€å‚æ•°è½¬ä¹‰ã€å¹³å°åˆ¤æ–­ï¼‰

### 2. æ¸²æŸ“è¿›ç¨‹ (Renderer)

æ¸²æŸ“è¿›ç¨‹è¿è¡Œåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­ï¼Œä½¿ç”¨ Vue 3 æ„å»ºç”¨æˆ·ç•Œé¢ã€‚

**æ ¸å¿ƒæ–‡ä»¶**:

- `src/App.vue`: ä¸»åº”ç”¨ç»„ä»¶ï¼Œè´Ÿè´£è·¯ç”±ç®¡ç†
- `src/composables/useScripts.ts`: è„šæœ¬å’Œè§„åˆ™çš„çŠ¶æ€ç®¡ç†ï¼ˆåŒ…æ‹¬æ‹–æ‹½æ’åºåŠŸèƒ½ï¼‰
- `src/Run/index.vue`: è¿è¡Œè„šæœ¬ç•Œé¢
- `src/RunSetting/index.vue`: è®¾ç½®ç•Œé¢
- `src/RunSetting/components/ScriptList.vue`: è„šæœ¬åˆ—è¡¨ç»„ä»¶ï¼ˆæ”¯æŒæ‹–æ‹½æ’åºï¼‰
- `src/RunSetting/components/RuleList.vue`: è§„åˆ™åˆ—è¡¨ç»„ä»¶ï¼ˆæ”¯æŒæ‹–æ‹½æ’åºï¼‰

### 3. æ•°æ®æµ

```
ç”¨æˆ·æ“ä½œ (UI)
    â†“
useScripts.ts (çŠ¶æ€ç®¡ç†)
    â†“
window.services (API è°ƒç”¨)
    â†“
preload/services.js (Node.js ç¯å¢ƒ)
    â†“
lib/*.js (å…·ä½“å®ç°)
    â†“
æ–‡ä»¶ç³»ç»Ÿ / ç³»ç»Ÿå‘½ä»¤
```

## ğŸ”§ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°åŠŸèƒ½

1. **åˆ›å»ºæ–°ç»„ä»¶**

   åœ¨ `src/` ç›®å½•ä¸‹åˆ›å»ºæ–°çš„ Vue ç»„ä»¶ï¼š

```vue
<script setup lang="ts">
// ç»„ä»¶é€»è¾‘
</script>

<template>
  <!-- ç»„ä»¶æ¨¡æ¿ -->
</template>

<style scoped>
/* ç»„ä»¶æ ·å¼ */
</style>
```

2. **æ·»åŠ è·¯ç”±**

   åœ¨ `src/App.vue` ä¸­æ·»åŠ è·¯ç”±é€»è¾‘ï¼š

```vue
<template>
  <NewFeature v-else-if="route === 'new-feature'" />
</template>
```

3. **æ³¨å†ŒåŠŸèƒ½å…¥å£**

   åœ¨ `public/plugin.json` ä¸­æ·»åŠ åŠŸèƒ½å…¥å£ï¼š

```json
{
  "features": [
    {
      "code": "new-feature",
      "explain": "æ–°åŠŸèƒ½è¯´æ˜",
      "cmds": ["new-feature", "æ–°åŠŸèƒ½"]
    }
  ]
}
```

### æ‰©å±•è„šæœ¬æ‰“å¼€æ–¹å¼

å¦‚æœéœ€è¦æ‰©å±•è„šæœ¬çš„æ‰“å¼€æ–¹å¼ï¼Œå¯ä»¥ï¼š

1. **åœ¨å¹³å°æœåŠ¡ä¸­æ·»åŠ æ–°æ–¹æ³•** (`public/preload/lib/platformService.js`):

```javascript
// æ·»åŠ æ–°çš„æ‰“å¼€æ–¹å¼
function openWithCustomMethod(filePath) {
  // è‡ªå®šä¹‰é€»è¾‘
}

module.exports = {
  // ... ç°æœ‰æ–¹æ³•
  openWithCustomMethod,
};
```

2. **åœ¨è„šæœ¬æœåŠ¡ä¸­é›†æˆ** (`public/preload/lib/scriptService.js`):

```javascript
const { openWithCustomMethod } = require("./platformService");

function openWithRule(filePath) {
  // ç°æœ‰è§„åˆ™åŒ¹é…é€»è¾‘...
  // å¯ä»¥æ·»åŠ æ–°çš„åŒ¹é…è§„åˆ™æˆ–æ‰“å¼€æ–¹å¼
  return openWithCustomMethod(filePath);
}
```

### æ·»åŠ æ–°çš„é…ç½®é¡¹

1. **æ›´æ–°ç±»å‹å®šä¹‰**

   åœ¨ `src/composables/useScripts.ts` ä¸­æ›´æ–° `Config` æ¥å£ï¼š

```typescript
export interface Config {
  scripts: ScriptItem[]
  rules: RuleItem[]
  newConfig?: NewConfigType  // æ–°å¢é…ç½®
}
```

2. **æ›´æ–°é…ç½®æœåŠ¡**

   åœ¨ `public/preload/lib/configService.js` ä¸­å¤„ç†æ–°é…ç½®çš„é»˜è®¤å€¼ï¼š

```javascript
function readConfig() {
  // ...
  return {
    scripts: [],
    rules: [],
    newConfig: defaultValue  // é»˜è®¤å€¼
  }
}
```

### è°ƒè¯•æŠ€å·§

1. **æŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—**

   - åœ¨ uTools ä¸­ï¼Œå³é”®ç‚¹å‡»æ’ä»¶å›¾æ ‡
   - é€‰æ‹©ã€Œå¼€å‘è€…å·¥å…·ã€
   - æŸ¥çœ‹ Console æ ‡ç­¾é¡µçš„æ—¥å¿—

2. **è°ƒè¯•é¢„åŠ è½½è„šæœ¬**

   åœ¨ `public/preload/lib/*.js` ä¸­ä½¿ç”¨ `console.log` è¾“å‡ºæ—¥å¿—ï¼Œæ—¥å¿—ä¼šæ˜¾ç¤ºåœ¨ uTools çš„å¼€å‘è€…å·¥å…·ä¸­ã€‚

3. **çƒ­é‡è½½**

   å¼€å‘æ¨¡å¼ä¸‹ï¼Œä¿®æ”¹ Vue ç»„ä»¶ä»£ç ä¼šè‡ªåŠ¨çƒ­é‡è½½ã€‚ä¿®æ”¹é¢„åŠ è½½è„šæœ¬éœ€è¦é‡æ–°åŠ è½½æ’ä»¶ã€‚

## ğŸ“š API å‚è€ƒ

### window.services API

é¢„åŠ è½½è„šæœ¬é€šè¿‡ `window.services` å¯¹è±¡æš´éœ²ä»¥ä¸‹ APIï¼š

#### é…ç½®ç›¸å…³

- `readConfig()`: è¯»å–é…ç½®æ–‡ä»¶
  - è¿”å›: `Config` å¯¹è±¡
- `saveConfig(config)`: ä¿å­˜é…ç½®æ–‡ä»¶
  - å‚æ•°: `config` - é…ç½®å¯¹è±¡

#### æ–‡ä»¶æ“ä½œç›¸å…³

- `pathExists(filePath)`: æ£€æŸ¥è·¯å¾„æ˜¯å¦å­˜åœ¨
  - å‚æ•°: `filePath` - æ–‡ä»¶è·¯å¾„ï¼ˆå­—ç¬¦ä¸²ï¼‰
  - è¿”å›: `boolean`
- `readDirectory(dirPath)`: è¯»å–ç›®å½•å†…å®¹
  - å‚æ•°: `dirPath` - ç›®å½•è·¯å¾„ï¼ˆå­—ç¬¦ä¸²ï¼‰
  - è¿”å›: `Array<{name: string, path: string, isDirectory: boolean, size: number}>`

#### è„šæœ¬æ‰§è¡Œç›¸å…³

- `openWithRule(filePath)`: æ ¹æ®è§„åˆ™æ‰“å¼€æ–‡ä»¶
  - å‚æ•°: `filePath` - æ–‡ä»¶è·¯å¾„ï¼ˆå­—ç¬¦ä¸²ï¼‰
  - è¿”å›: `Promise<{success: boolean}>`

### useScripts Composable

`src/composables/useScripts.ts` æä¾›äº†ä»¥ä¸‹å‡½æ•°å’Œå“åº”å¼æ•°æ®ï¼š

#### å“åº”å¼æ•°æ®

- `config`: å®Œæ•´çš„é…ç½®å¯¹è±¡
- `scripts`: è„šæœ¬åˆ—è¡¨
- `rules`: è§„åˆ™åˆ—è¡¨

#### å‡½æ•°

- `loadConfig()`: åŠ è½½é…ç½®
- `saveConfig()`: ä¿å­˜é…ç½®
- `addScript(script)`: æ·»åŠ è„šæœ¬
- `removeScript(id)`: åˆ é™¤è„šæœ¬
- `updateScript(id, updates)`: æ›´æ–°è„šæœ¬
- `toggleScriptDisabled(id)`: åˆ‡æ¢è„šæœ¬ç¦ç”¨çŠ¶æ€
- `updateScriptsOrder(newOrder)`: æ›´æ–°è„šæœ¬é¡ºåºï¼ˆç”¨äºæ‹–æ‹½æ’åºï¼‰
  - å‚æ•°: `newOrder` - æ–°çš„è„šæœ¬é¡ºåºæ•°ç»„
  - è¿”å›: `boolean` - æ˜¯å¦æˆåŠŸ
- `addRule(rule)`: æ·»åŠ è§„åˆ™
- `removeRule(id)`: åˆ é™¤è§„åˆ™
- `updateRule(id, updates)`: æ›´æ–°è§„åˆ™
- `toggleRuleDisabled(id)`: åˆ‡æ¢è§„åˆ™ç¦ç”¨çŠ¶æ€
- `updateRulesOrder(newOrder)`: æ›´æ–°è§„åˆ™é¡ºåºï¼ˆç”¨äºæ‹–æ‹½æ’åºï¼‰
  - å‚æ•°: `newOrder` - æ–°çš„è§„åˆ™é¡ºåºæ•°ç»„
  - è¿”å›: `boolean` - æ˜¯å¦æˆåŠŸ
- `searchScripts(keyword)`: æœç´¢è„šæœ¬ï¼ˆè‡ªåŠ¨è¿‡æ»¤ç¦ç”¨çš„è„šæœ¬ï¼‰
- `searchRules(keyword)`: æœç´¢è§„åˆ™
- `getAllScripts()`: è·å–æ‰€æœ‰è„šæœ¬ï¼ˆæ‰å¹³åŒ–ï¼ŒåŒ…æ‹¬æ–‡ä»¶å¤¹ä¸­çš„è„šæœ¬ï¼Œè‡ªåŠ¨è¿‡æ»¤ç¦ç”¨çš„è„šæœ¬ï¼‰

### useSettings Composable

`src/composables/useSettings.ts` æä¾›äº†ä»¥ä¸‹å‡½æ•°å’Œå“åº”å¼æ•°æ®ï¼š

#### å“åº”å¼æ•°æ®

- `settings`: è®¾ç½®å¯¹è±¡ï¼ŒåŒ…å«:
  - `locale`: è¯­è¨€ ('zh-CN' | 'en-US')
  - `themeColor`: ä¸»é¢˜è‰²
  - `buttonColors`: æŒ‰é’®é¢œè‰²é…ç½®
  - `defaultExcludeFolders`: é»˜è®¤æ’é™¤çš„æ–‡ä»¶å¤¹åˆ—è¡¨

#### å‡½æ•°

- `loadSettings()`: ä»é…ç½®ä¸­åŠ è½½è®¾ç½®
- `saveSettings()`: ä¿å­˜è®¾ç½®åˆ°é…ç½®
- `resetSettings()`: é‡ç½®ä¸ºé»˜è®¤å€¼
- `updateDefaultExcludeFolders(folders)`: æ›´æ–°é»˜è®¤æ’é™¤æ–‡ä»¶å¤¹
- `updateThemeColor(color)`: æ›´æ–°ä¸»é¢˜è‰²
- `updateButtonColor(variant, color)`: æ›´æ–°æŒ‰é’®é¢œè‰²
- `getDefaultExcludeFolders()`: è·å–é»˜è®¤æ’é™¤æ–‡ä»¶å¤¹
- `getButtonColors()`: è·å–æŒ‰é’®é¢œè‰²é…ç½®
- `setLocale(locale)`: åˆ‡æ¢è¯­è¨€
- `localeMessages`: å½“å‰è¯­è¨€æ¶ˆæ¯å¯¹è±¡

## ğŸ§ª æµ‹è¯•

ç›®å‰é¡¹ç›®æœªåŒ…å«è‡ªåŠ¨åŒ–æµ‹è¯•ã€‚å»ºè®®åœ¨å¼€å‘æ—¶æ‰‹åŠ¨æµ‹è¯•ä»¥ä¸‹åœºæ™¯ï¼š

1. **è„šæœ¬ç®¡ç†**
   - æ·»åŠ å•ä¸ªè„šæœ¬æ–‡ä»¶
   - æ·»åŠ æ–‡ä»¶å¤¹ï¼ˆåŒ…æ‹¬åµŒå¥—ç›®å½•ï¼‰
   - ç¼–è¾‘è„šæœ¬ä¿¡æ¯
   - åˆ é™¤è„šæœ¬

2. **è§„åˆ™é…ç½®**
   - æ·»åŠ è§„åˆ™
   - æµ‹è¯•æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…
   - æµ‹è¯•ä¸åŒåº”ç”¨çš„æ‰“å¼€æ–¹å¼
   - æµ‹è¯•å‚æ•°ä¼ é€’

3. **è„šæœ¬è¿è¡Œ**
   - æµ‹è¯•æ–‡ä»¶åæœç´¢
   - æµ‹è¯•å…³é”®å­—æœç´¢
   - æµ‹è¯•è§„åˆ™åŒ¹é…
   - æµ‹è¯•é»˜è®¤åº”ç”¨æ‰“å¼€

## ğŸš€ æ„å»ºå’Œå‘å¸ƒ

### æ„å»ºç”Ÿäº§ç‰ˆæœ¬

```bash
pnpm build
# æˆ–
npm run build
```

æ„å»ºå®Œæˆåï¼Œæ–‡ä»¶ä¼šè¾“å‡ºåˆ° `dist` ç›®å½•ã€‚

### æ‰“åŒ…æ’ä»¶

1. ç¡®ä¿ `dist` ç›®å½•åŒ…å«æ‰€æœ‰å¿…è¦æ–‡ä»¶
2. å°† `dist` ç›®å½•å’Œ `public/plugin.json`ã€`public/logo.png` æ‰“åŒ…æˆ zip æ–‡ä»¶
3. åœ¨ uTools æ’ä»¶å¸‚åœºä¸­ä¸Šä¼ 

## ğŸ“ ä»£ç è§„èŒƒ

- ä½¿ç”¨ TypeScript è¿›è¡Œç±»å‹æ£€æŸ¥
- ä½¿ç”¨ Vue 3 Composition API
- ç»„ä»¶ä½¿ç”¨ `<script setup>` è¯­æ³•
- éµå¾ª ESLint è§„åˆ™ï¼ˆå¦‚æœé…ç½®äº†ï¼‰
- ä»£ç æ ¼å¼åŒ–ä½¿ç”¨ Prettierï¼ˆå¦‚æœé…ç½®äº†ï¼‰

## ğŸ› å¸¸è§é—®é¢˜

### å¼€å‘æœåŠ¡å™¨æ— æ³•å¯åŠ¨

- æ£€æŸ¥ç«¯å£ 5173 æ˜¯å¦è¢«å ç”¨
- æ£€æŸ¥ Node.js ç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
- åˆ é™¤ `node_modules` å’Œé”æ–‡ä»¶ï¼Œé‡æ–°å®‰è£…ä¾èµ–

### æ’ä»¶æ— æ³•åŠ è½½

- æ£€æŸ¥ `public/plugin.json` æ ¼å¼æ˜¯å¦æ­£ç¡®
- æ£€æŸ¥æ˜¯å¦é€‰æ‹©äº†æ­£ç¡®çš„é¡¹ç›®æ ¹ç›®å½•
- æŸ¥çœ‹ uTools å¼€å‘è€…å·¥å…·ä¸­çš„é”™è¯¯ä¿¡æ¯

### é¢„åŠ è½½è„šæœ¬ä¸å·¥ä½œ

- æ£€æŸ¥ `public/preload/services.js` æ˜¯å¦æ­£ç¡®å¯¼å‡º
- æ£€æŸ¥ `window.services` æ˜¯å¦å·²æ­£ç¡®æ³¨å…¥
- æŸ¥çœ‹ uTools å¼€å‘è€…å·¥å…·ä¸­çš„é”™è¯¯ä¿¡æ¯

## ğŸ”— ç›¸å…³èµ„æº

- [uTools å®˜æ–¹æ–‡æ¡£](https://u.tools/docs/)
- [Vue 3 æ–‡æ¡£](https://cn.vuejs.org/)
- [Vite æ–‡æ¡£](https://cn.vitejs.dev/)
- [TypeScript æ–‡æ¡£](https://www.typescriptlang.org/zh/)
