# é…ç½®æ–‡æ¡£

æœ¬æ–‡æ¡£ä»‹ç»é…ç½®æ–‡ä»¶çš„æ ¼å¼ã€æ•°æ®å­˜å‚¨ä½ç½®ã€é…ç½®é¡¹è¯´æ˜ä»¥åŠé…ç½®ç®¡ç†æœºåˆ¶ã€‚

## ğŸ“ æ•°æ®å­˜å‚¨

### å­˜å‚¨ä½ç½®

é…ç½®æ–‡ä»¶å­˜å‚¨åœ¨ uTools çš„ç”¨æˆ·æ•°æ®ç›®å½•ä¸­ï¼Œä¸åŒæ“ä½œç³»ç»Ÿçš„è·¯å¾„å¦‚ä¸‹ï¼š

- **Windows**: `%APPDATA%\uTools\utools-scripts-hub\config.json`
  - å®Œæ•´è·¯å¾„ç¤ºä¾‹: `C:\Users\ç”¨æˆ·å\AppData\Roaming\uTools\utools-scripts-hub\config.json`
- **macOS**: `~/Library/Application Support/uTools/utools-scripts-hub/config.json`
- **Linux**: `~/.config/uTools/utools-scripts-hub/config.json`

### ç›®å½•ç»“æ„

```
utools-scripts-hub/
â””â”€â”€ config.json    # é…ç½®æ–‡ä»¶ï¼ˆJSON æ ¼å¼ï¼‰
```

å¦‚æœç›®å½•ä¸å­˜åœ¨ï¼Œç¨‹åºä¼šåœ¨é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨åˆ›å»ºã€‚

## ğŸ“‹ é…ç½®æ–‡ä»¶æ ¼å¼

### å®Œæ•´ç¤ºä¾‹

```json
{
  "scripts": [
    {
      "id": "script-001",
      "name": "test.js",
      "path": "C:\\Users\\username\\scripts\\test.js",
      "isDirectory": false,
      "keywords": [],
      "description": "æµ‹è¯•è„šæœ¬"
    },
    {
      "id": "script-002",
      "name": "my-scripts",
      "path": "C:\\Users\\username\\scripts\\my-scripts",
      "isDirectory": true,
      "keywords": [],
      "description": "æˆ‘çš„è„šæœ¬æ–‡ä»¶å¤¹"
    }
  ],
  "rules": [
    {
      "id": "rule-001",
      "name": "JavaScript æ–‡ä»¶",
      "pattern": "\\.js$",
      "app": "node",
      "args": [],
      "description": "ä½¿ç”¨ Node.js è¿è¡Œ JavaScript æ–‡ä»¶"
    },
    {
      "id": "rule-002",
      "name": "PowerShell è„šæœ¬",
      "pattern": "\\.ps1$",
      "app": "powershell",
      "args": ["-ExecutionPolicy", "Bypass", "-File"],
      "description": "ä½¿ç”¨ PowerShell è¿è¡Œ .ps1 è„šæœ¬"
    },
    {
      "id": "rule-003",
      "name": "æ–‡æœ¬æ–‡ä»¶",
      "pattern": "\\.(txt|md|json)$",
      "app": "code",
      "args": [],
      "description": "ä½¿ç”¨ VS Code æ‰“å¼€æ–‡æœ¬æ–‡ä»¶"
    }
  ]
}
```

## ğŸ”§ é…ç½®é¡¹è¯´æ˜

### scripts (è„šæœ¬åˆ—è¡¨)

è„šæœ¬åˆ—è¡¨åŒ…å«æ‰€æœ‰å·²æ·»åŠ çš„è„šæœ¬å’Œæ–‡ä»¶å¤¹ã€‚

#### ScriptItem å¯¹è±¡

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `id` | `string` | æ˜¯ | è„šæœ¬çš„å”¯ä¸€æ ‡è¯†ç¬¦ï¼Œé€šå¸¸ä½¿ç”¨ UUID æˆ–æ—¶é—´æˆ³ç”Ÿæˆ |
| `name` | `string` | æ˜¯ | è„šæœ¬çš„æ˜¾ç¤ºåç§°ï¼Œé€šå¸¸æ˜¯æ–‡ä»¶åæˆ–æ–‡ä»¶å¤¹å |
| `path` | `string` | æ˜¯ | è„šæœ¬çš„å®Œæ•´æ–‡ä»¶è·¯å¾„æˆ–æ–‡ä»¶å¤¹è·¯å¾„ |
| `isDirectory` | `boolean` | æ˜¯ | æ˜¯å¦ä¸ºæ–‡ä»¶å¤¹ï¼Œ`true` è¡¨ç¤ºæ–‡ä»¶å¤¹ï¼Œ`false` è¡¨ç¤ºæ–‡ä»¶ |
| `keywords` | `string[]` | å¦ | å…³é”®å­—æ•°ç»„ï¼Œç”¨äºæœç´¢åŒ¹é…ï¼ˆå½“å‰æœªä½¿ç”¨ï¼‰ |
| `description` | `string` | å¦ | è„šæœ¬çš„æè¿°ä¿¡æ¯ï¼Œç”¨äºæœç´¢å’Œè¯†åˆ« |

#### ç¤ºä¾‹

**å•ä¸ªè„šæœ¬æ–‡ä»¶**:
```json
{
  "id": "script-001",
  "name": "hello.js",
  "path": "C:\\scripts\\hello.js",
  "isDirectory": false,
  "description": "Hello World è„šæœ¬"
}
```

**æ–‡ä»¶å¤¹**:
```json
{
  "id": "script-002",
  "name": "my-scripts",
  "path": "C:\\scripts\\my-scripts",
  "isDirectory": true,
  "description": "æˆ‘çš„è„šæœ¬é›†åˆ"
}
```

**æ³¨æ„**: å½“ `isDirectory` ä¸º `true` æ—¶ï¼Œç¨‹åºä¼šåœ¨è¿è¡Œæ—¶é€’å½’è¯»å–æ–‡ä»¶å¤¹å†…å®¹ï¼Œå°†æ–‡ä»¶å¤¹ä¸­çš„æ‰€æœ‰æ–‡ä»¶æ‰å¹³åŒ–ä¸ºè„šæœ¬åˆ—è¡¨ã€‚

### rules (è§„åˆ™åˆ—è¡¨)

è§„åˆ™åˆ—è¡¨å®šä¹‰äº†ä¸åŒæ–‡ä»¶ç±»å‹ä½¿ç”¨å“ªä¸ªå¤–éƒ¨åº”ç”¨æ‰“å¼€ã€‚

#### RuleItem å¯¹è±¡

| å­—æ®µ | ç±»å‹ | å¿…å¡« | è¯´æ˜ |
|------|------|------|------|
| `id` | `string` | æ˜¯ | è§„åˆ™çš„å”¯ä¸€æ ‡è¯†ç¬¦ |
| `name` | `string` | æ˜¯ | è§„åˆ™çš„æ˜¾ç¤ºåç§° |
| `pattern` | `string` | æ˜¯ | æ­£åˆ™è¡¨è¾¾å¼ï¼Œç”¨äºåŒ¹é…æ–‡ä»¶åæˆ–æ–‡ä»¶æ‰©å±•å |
| `app` | `string` | å¦ | æŒ‡å®šç”¨äºæ‰“å¼€æ–‡ä»¶çš„å¤–éƒ¨åº”ç”¨ï¼Œç•™ç©ºåˆ™ä½¿ç”¨ç³»ç»Ÿé»˜è®¤åº”ç”¨ |
| `args` | `string[]` | å¦ | åº”ç”¨å¯åŠ¨æ—¶çš„å‚æ•°æ•°ç»„ï¼Œå¤šä¸ªå‚æ•°ç”¨æ•°ç»„å…ƒç´ åˆ†éš” |
| `description` | `string` | å¦ | è§„åˆ™çš„æè¿°ä¿¡æ¯ |

#### è§„åˆ™åŒ¹é…æœºåˆ¶

1. **åŒ¹é…é¡ºåº**: è§„åˆ™æŒ‰ç…§åœ¨æ•°ç»„ä¸­çš„é¡ºåºä¾æ¬¡åŒ¹é…ï¼Œæ‰¾åˆ°ç¬¬ä¸€ä¸ªåŒ¹é…çš„è§„åˆ™å³åœæ­¢
2. **åŒ¹é…å¯¹è±¡**: æ­£åˆ™è¡¨è¾¾å¼ä¼šåŒæ—¶åŒ¹é…æ–‡ä»¶åå’Œæ–‡ä»¶æ‰©å±•å
3. **åŒ¹é…å¤±è´¥**: å¦‚æœæ²¡æœ‰è§„åˆ™åŒ¹é…ï¼Œä½¿ç”¨ç³»ç»Ÿé»˜è®¤åº”ç”¨æ‰“å¼€æ–‡ä»¶
4. **Linux ç»ˆç«¯æ‰§è¡Œ**: åœ¨ Linux ç³»ç»Ÿä¸‹ï¼Œå¦‚æœè§„åˆ™æŒ‡å®šäº†åº”ç”¨ï¼ˆå¦‚ `node`ã€`python` ç­‰ï¼‰ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨åœ¨ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œè„šæœ¬ï¼Œæ–¹ä¾¿æŸ¥çœ‹è¾“å‡ºå’Œé”™è¯¯ä¿¡æ¯ã€‚æ”¯æŒçš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨åŒ…æ‹¬ gnome-terminalã€xtermã€konsoleã€terminator ç­‰

#### ç¤ºä¾‹

**JavaScript æ–‡ä»¶ä½¿ç”¨ Node.js è¿è¡Œ**:
```json
{
  "id": "rule-001",
  "name": "JavaScript æ–‡ä»¶",
  "pattern": "\\.js$",
  "app": "node",
  "args": [],
  "description": "ä½¿ç”¨ Node.js è¿è¡Œ .js æ–‡ä»¶"
}
```

**PowerShell è„šæœ¬ä½¿ç”¨ç‰¹å®šå‚æ•°è¿è¡Œ**:
```json
{
  "id": "rule-002",
  "name": "PowerShell è„šæœ¬",
  "pattern": "\\.ps1$",
  "app": "powershell",
  "args": ["-ExecutionPolicy", "Bypass", "-File"],
  "description": "ç»•è¿‡æ‰§è¡Œç­–ç•¥è¿è¡Œ PowerShell è„šæœ¬"
}
```

**Python è„šæœ¬ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒ**:
```json
{
  "id": "rule-003",
  "name": "Python è„šæœ¬",
  "pattern": "\\.py$",
  "app": "C:\\Python\\python.exe",
  "args": [],
  "description": "ä½¿ç”¨ Python è¿è¡Œ .py æ–‡ä»¶"
}
```

**æ–‡æœ¬æ–‡ä»¶ä½¿ç”¨ VS Code æ‰“å¼€**:
```json
{
  "id": "rule-004",
  "name": "æ–‡æœ¬æ–‡ä»¶",
  "pattern": "\\.(txt|md|json|yaml|yml)$",
  "app": "code",
  "args": [],
  "description": "ä½¿ç”¨ VS Code æ‰“å¼€æ–‡æœ¬æ–‡ä»¶"
}
```

**ä½¿ç”¨ç³»ç»Ÿé»˜è®¤åº”ç”¨ï¼ˆä¸æŒ‡å®š appï¼‰**:
```json
{
  "id": "rule-005",
  "name": "å›¾ç‰‡æ–‡ä»¶",
  "pattern": "\\.(jpg|jpeg|png|gif|bmp)$",
  "description": "ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å›¾ç‰‡æŸ¥çœ‹å™¨æ‰“å¼€"
}
```

## ğŸ” æ­£åˆ™è¡¨è¾¾å¼æŒ‡å—

### å¸¸ç”¨æ¨¡å¼

| æ¨¡å¼ | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `\.js$` | åŒ¹é…ä»¥ `.js` ç»“å°¾çš„æ–‡ä»¶ | `test.js`, `script.js` |
| `\.(js\|ts)$` | åŒ¹é… `.js` æˆ– `.ts` ç»“å°¾çš„æ–‡ä»¶ | `test.js`, `test.ts` |
| `^test` | åŒ¹é…ä»¥ `test` å¼€å¤´çš„æ–‡ä»¶å | `test.js`, `test-script.js` |
| `test.*` | åŒ¹é…åŒ…å« `test` çš„æ–‡ä»¶å | `test.js`, `mytest.js`, `test-script.js` |
| `\.(js\|ts\|jsx\|tsx)$` | åŒ¹é…å¤šç§ JavaScript ç›¸å…³æ‰©å±•å | `test.js`, `test.ts`, `test.jsx` |

### è½¬ä¹‰è¯´æ˜

åœ¨ JSON ä¸­ï¼Œæ­£åˆ™è¡¨è¾¾å¼çš„ç‰¹æ®Šå­—ç¬¦éœ€è¦è½¬ä¹‰ï¼š

- `\` â†’ `\\`
- `.` â†’ `\.`
- `|` â†’ `\|`

ä¾‹å¦‚ï¼ŒåŒ¹é… `.js` æ–‡ä»¶çš„æ­£åˆ™è¡¨è¾¾å¼åœ¨ JSON ä¸­åº”å†™ä¸º `"\\.js$"`ã€‚

## ğŸ”„ é…ç½®ç®¡ç†

### è¯»å–é…ç½®

é…ç½®åœ¨åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åŠ è½½ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ `useScripts.ts` ä¸­çš„ `loadConfig()` å‡½æ•°æ‰‹åŠ¨åŠ è½½ï¼š

```typescript
import { loadConfig } from '@/composables/useScripts'

loadConfig()
```

### ä¿å­˜é…ç½®

é…ç½®ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨ä¿å­˜ï¼š

1. æ·»åŠ è„šæœ¬
2. åˆ é™¤è„šæœ¬
3. æ›´æ–°è„šæœ¬
4. æ·»åŠ è§„åˆ™
5. åˆ é™¤è§„åˆ™
6. æ›´æ–°è§„åˆ™

ä¹Ÿå¯ä»¥æ‰‹åŠ¨è°ƒç”¨ `saveConfig()` å‡½æ•°ï¼š

```typescript
import { saveConfig } from '@/composables/useScripts'

saveConfig()
```

### é…ç½®éªŒè¯

ç¨‹åºåœ¨è¯»å–é…ç½®æ—¶ä¼šè¿›è¡ŒåŸºæœ¬çš„éªŒè¯ï¼š

1. **JSON æ ¼å¼éªŒè¯**: ç¡®ä¿æ–‡ä»¶æ˜¯æœ‰æ•ˆçš„ JSON
2. **é»˜è®¤å€¼å¤„ç†**: å¦‚æœé…ç½®ç¼ºå¤±æˆ–æ ¼å¼é”™è¯¯ï¼Œä½¿ç”¨é»˜è®¤å€¼ï¼š
   ```json
   {
     "scripts": [],
     "rules": []
   }
   ```
3. **ç±»å‹æ£€æŸ¥**: TypeScript ç±»å‹å®šä¹‰ç¡®ä¿æ•°æ®ç»“æ„æ­£ç¡®

## ğŸ› ï¸ æ‰‹åŠ¨ç¼–è¾‘é…ç½®

### æ³¨æ„äº‹é¡¹

1. **å¤‡ä»½**: åœ¨æ‰‹åŠ¨ç¼–è¾‘é…ç½®æ–‡ä»¶å‰ï¼Œå»ºè®®å…ˆå¤‡ä»½
2. **JSON æ ¼å¼**: ç¡®ä¿ JSON æ ¼å¼æ­£ç¡®ï¼Œå¯ä»¥ä½¿ç”¨ JSON éªŒè¯å·¥å…·æ£€æŸ¥
3. **è·¯å¾„æ ¼å¼**: 
   - Windows è·¯å¾„ä½¿ç”¨åæ–œæ  `\` æˆ–æ­£æ–œæ  `/`
   - è·¯å¾„ä¸­çš„åæ–œæ åœ¨ JSON ä¸­éœ€è¦è½¬ä¹‰ä¸º `\\`
4. **ID å”¯ä¸€æ€§**: ç¡®ä¿æ‰€æœ‰ `id` å­—æ®µéƒ½æ˜¯å”¯ä¸€çš„
5. **æ­£åˆ™è¡¨è¾¾å¼**: ç¡®ä¿æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•æ­£ç¡®

### ç¼–è¾‘æ­¥éª¤

1. å…³é—­ uTools æ’ä»¶ï¼ˆå¦‚æœæ­£åœ¨è¿è¡Œï¼‰
2. æ‰¾åˆ°é…ç½®æ–‡ä»¶ä½ç½®ï¼ˆå‚è€ƒ"å­˜å‚¨ä½ç½®"ç« èŠ‚ï¼‰
3. ä½¿ç”¨æ–‡æœ¬ç¼–è¾‘å™¨æ‰“å¼€ `config.json`
4. ç¼–è¾‘é…ç½®å†…å®¹
5. ä¿å­˜æ–‡ä»¶
6. é‡æ–°æ‰“å¼€ uTools æ’ä»¶

### å¸¸è§é”™è¯¯

1. **JSON è¯­æ³•é”™è¯¯**: ç¼ºå°‘é€—å·ã€å¼•å·ä¸åŒ¹é…ç­‰
2. **è·¯å¾„ä¸å­˜åœ¨**: è„šæœ¬è·¯å¾„æŒ‡å‘ä¸å­˜åœ¨çš„æ–‡ä»¶æˆ–æ–‡ä»¶å¤¹
3. **æ­£åˆ™è¡¨è¾¾å¼é”™è¯¯**: æ­£åˆ™è¡¨è¾¾å¼è¯­æ³•ä¸æ­£ç¡®
4. **ID é‡å¤**: å¤šä¸ªè„šæœ¬æˆ–è§„åˆ™ä½¿ç”¨ç›¸åŒçš„ ID

## ğŸ“¤ å¯¼å…¥/å¯¼å‡ºé…ç½®

### å¯¼å‡ºé…ç½®

å¯ä»¥ç›´æ¥å¤åˆ¶ `config.json` æ–‡ä»¶çš„å†…å®¹ï¼Œæˆ–ä½¿ç”¨ä»¥ä¸‹æ–¹å¼ï¼š

1. åœ¨è®¾ç½®ç•Œé¢æŸ¥çœ‹é…ç½®ï¼ˆæœªæ¥å¯èƒ½æ·»åŠ å¯¼å‡ºåŠŸèƒ½ï¼‰
2. ç›´æ¥å¤åˆ¶é…ç½®æ–‡ä»¶

### å¯¼å…¥é…ç½®

1. å¤‡ä»½å½“å‰é…ç½®
2. å°†æ–°é…ç½®å†…å®¹å¤åˆ¶åˆ° `config.json`
3. ç¡®ä¿ JSON æ ¼å¼æ­£ç¡®
4. é‡æ–°åŠ è½½æ’ä»¶

## ğŸ” å®‰å…¨å»ºè®®

1. **è·¯å¾„éªŒè¯**: ç¨‹åºä¼šéªŒè¯è·¯å¾„æ˜¯å¦å­˜åœ¨ï¼Œä½†å»ºè®®ä¸è¦æ‰‹åŠ¨ç¼–è¾‘ä¸ºä¸å®‰å…¨çš„è·¯å¾„
2. **åº”ç”¨è·¯å¾„**: å¦‚æœæŒ‡å®šäº†å¤–éƒ¨åº”ç”¨ï¼Œç¡®ä¿åº”ç”¨è·¯å¾„å®‰å…¨å¯é 
3. **æ­£åˆ™è¡¨è¾¾å¼**: é¿å…ä½¿ç”¨å¯èƒ½å¯¼è‡´æ€§èƒ½é—®é¢˜çš„å¤æ‚æ­£åˆ™è¡¨è¾¾å¼
4. **å¤‡ä»½**: å®šæœŸå¤‡ä»½é…ç½®æ–‡ä»¶ï¼Œé˜²æ­¢æ•°æ®ä¸¢å¤±

## ğŸ“ é…ç½®ç¤ºä¾‹é›†åˆ

### å¼€å‘ç¯å¢ƒé…ç½®

é€‚åˆå¼€å‘è€…çš„è§„åˆ™é…ç½®ï¼š

```json
{
  "rules": [
    {
      "id": "rule-js",
      "name": "JavaScript",
      "pattern": "\\.js$",
      "app": "node",
      "args": []
    },
    {
      "id": "rule-ts",
      "name": "TypeScript",
      "pattern": "\\.ts$",
      "app": "ts-node",
      "args": []
    },
    {
      "id": "rule-py",
      "name": "Python",
      "pattern": "\\.py$",
      "app": "python",
      "args": []
    },
    {
      "id": "rule-code",
      "name": "ä»£ç æ–‡ä»¶",
      "pattern": "\\.(js|ts|py|java|cpp|h|hpp)$",
      "app": "code",
      "args": []
    }
  ]
}
```

### è„šæœ¬ç®¡ç†é…ç½®

åŒ…å«å¸¸ç”¨è„šæœ¬çš„é…ç½®ï¼š

```json
{
  "scripts": [
    {
      "id": "script-backup",
      "name": "backup.ps1",
      "path": "C:\\scripts\\backup.ps1",
      "isDirectory": false,
      "description": "ç³»ç»Ÿå¤‡ä»½è„šæœ¬"
    },
    {
      "id": "script-cleanup",
      "name": "cleanup.js",
      "path": "C:\\scripts\\cleanup.js",
      "isDirectory": false,
      "description": "æ¸…ç†ä¸´æ—¶æ–‡ä»¶"
    },
    {
      "id": "script-folder",
      "name": "å¸¸ç”¨è„šæœ¬",
      "path": "C:\\scripts\\å¸¸ç”¨",
      "isDirectory": true,
      "description": "å¸¸ç”¨è„šæœ¬é›†åˆ"
    }
  ]
}
```
